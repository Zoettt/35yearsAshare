# 🌐 交互式股票图表Web应用使用说明

## 🎯 应用概述

本Web应用基于Flask框架开发，提供了一个专业的交互式股票图表分析平台，支持：

- 📊 **多股票对比分析**
- 📈 **指数对照比较**  
- 🕒 **时间段筛选**
- 🔄 **实时交互式图表**
- 🖱️ **鼠标悬浮详情显示**
- 📏 **自动十字线定位**

## 🚀 快速启动

### 方法1：使用启动脚本（推荐）
```bash
cd /Users/guanjie/Desktop/cursor/longbridge
./start_web_app.sh
```

### 方法2：手动启动
```bash
cd /Users/guanjie/Desktop/cursor/longbridge
source venv/bin/activate
python web_chart_app.py
```

启动成功后访问：**http://127.0.0.1:5001**

## 🎮 功能使用指南

### 1. 股票选择
- **多选支持**：可同时选择多只股票进行对比
- **搜索功能**：输入股票名称或代码快速查找
- **默认股票**：系统默认选择贵州茅台(sh600519)
- **代码格式**：支持 sh600519、600519、贵州茅台 等多种格式

### 2. 指数对比
- **指数选择**：从下拉菜单选择对比指数
- **默认指数**：系统默认选择上证指数
- **可选指数**：上证50、上证指数、创业板指、北证50、沪深300、深证成指、科创50

### 3. 显示模式
- **原始价格模式**：显示股票的实际价格
- **标准化模式**：将所有股票价格标准化到基期=100，便于不同价位股票对比

### 4. 时间筛选
- **开始日期**：设置数据起始时间
- **结束日期**：设置数据结束时间
- **全历史**：留空则显示全部历史数据
- **智能建议**：推荐选择1-3年的时间范围以获得最佳体验

## 📊 图表交互功能

### 🖱️ 鼠标操作
- **悬浮显示**：鼠标悬浮在图表上查看详细数据
  - 股票名称和代码
  - 具体日期
  - 开盘价、收盘价、最高价、最低价
  - 成交量和成交额
  - 标准化价格（如启用）

- **十字线定位**：自动显示横纵延伸线，精确定位数据点

- **缩放平移**：
  - 鼠标滚轮缩放图表
  - 拖拽平移图表视野
  - 双击重置缩放

### 🎛️ 工具栏功能
- **🔍 缩放工具**：框选缩放、放大、缩小
- **↺ 重置视图**：恢复原始视图
- **📄 图例控制**：点击图例隐藏/显示数据系列
- **💾 下载图表**：保存为PNG格式

### 📈 图表特性
- **点大小 = 成交量**：图表上每个点的大小代表当日成交量
- **颜色区分**：不同股票使用不同颜色，便于区分
- **指数线**：红色虚线显示对比指数走势
- **基准线**：标准化模式下显示基期100的参考线

## 🎨 界面说明

### 顶部导航栏
- 应用标题和功能描述
- 响应式设计，支持移动端访问

### 控制面板
- **股票选择区**：多选下拉菜单，支持搜索
- **指数选择区**：单选下拉菜单
- **显示模式区**：标准化选项复选框
- **时间范围区**：开始和结束日期选择器
- **操作按钮区**：生成图表、重置表单

### 图表显示区
- **全屏显示**：图表占据整个显示区域
- **状态提示**：显示当前图表包含的股票数量和指数
- **加载动画**：生成图表时显示进度提示

### 功能说明区
- **交互功能说明**：详细介绍鼠标操作
- **图表特性说明**：解释图表元素含义
- **筛选功能说明**：介绍各种筛选选项
- **工具栏说明**：介绍图表工具功能

## 💡 使用技巧

### 📊 最佳实践
1. **股票对比**：建议同时选择2-4只股票进行对比
2. **时间范围**：推荐选择1-3年的数据范围
3. **标准化模式**：对比不同价位股票时建议启用
4. **指数参考**：选择相关指数作为市场基准对比

### 🚀 性能优化
1. **数据量控制**：避免选择过多股票或过长时间范围
2. **浏览器兼容**：推荐使用Chrome、Firefox、Safari等现代浏览器
3. **网络稳定**：确保网络连接稳定以获得最佳体验

### 🔧 问题排查
1. **数据加载失败**：刷新页面重试
2. **图表显示异常**：检查浏览器控制台错误信息
3. **股票数据缺失**：确认数据库中存在相应股票数据
4. **应用无法访问**：检查Flask应用是否正常启动

## 📁 文件结构

```
longbridge/
├── web_chart_app.py          # Flask主应用文件
├── start_web_app.sh          # 启动脚本
├── templates/
│   └── index.html            # HTML模板
├── static/
│   ├── css/
│   │   └── style.css         # CSS样式
│   └── js/
│       └── app.js            # JavaScript逻辑
└── output/
    ├── kline_data/           # K线数据库
    └── index_data/           # 指数数据库
```

## 🔄 API接口

### GET /api/stocks
获取可用股票列表
```json
{
  "success": true,
  "data": [
    {"symbol": "sh600519", "name": "贵州茅台"},
    {"symbol": "sh600036", "name": "招商银行"}
  ]
}
```

### GET /api/indices  
获取可用指数列表
```json
{
  "success": true,
  "data": ["上证指数", "深证成指", "创业板指"]
}
```

### POST /api/chart
生成图表数据
```json
{
  "stocks": ["sh600519", "sh600036"],
  "index": "上证指数",
  "normalize": true,
  "start_date": "2023-01-01",
  "end_date": "2024-01-01"
}
```

## 🆘 常见问题

**Q: 图表生成很慢怎么办？**
A: 减少选择的股票数量或缩短时间范围

**Q: 某些股票搜索不到怎么办？**
A: 检查股票代码格式，确保数据库中存在该股票数据

**Q: 图表显示不完整怎么办？**
A: 调整浏览器窗口大小或使用图表工具栏重置视图

**Q: 如何保存图表？**
A: 使用图表右上角的下载按钮，或浏览器右键保存图像

## 🔧 技术支持

- **Flask版本**：3.1.2+
- **Plotly版本**：5.0.0+
- **支持浏览器**：Chrome 80+, Firefox 75+, Safari 13+
- **Python版本**：3.8+

---

💡 **提示**：建议在使用前先通过命令行工具下载股票和指数数据，确保数据库完整。

🚀 **享受专业的股票分析体验！**
